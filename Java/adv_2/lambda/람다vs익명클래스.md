# λλ‹¤ vs μµλ… ν΄λμ¤

μλ°”μ—μ„ μµλ… ν΄λμ¤μ™€ λλ‹¤ ν‘ν„μ‹μ€ λ¨λ‘ κ°„λ‹¨ν•κ² κΈ°λ¥μ„ κµ¬ν„ν•κ±°λ‚ μΌνμ„±μΌλ΅ μ‚¬μ©ν•  κ°μ²΄λ¥Ό λ§λ“¤ λ• μ μ©ν•λ‹¤. ν•μ§€λ§
κ·Έ μ‚¬μ© λ°©μ‹κ³Ό μλ„μ—λ” μ°¨μ΄κ°€ μλ‹¤.

### 1. λ¬Έλ²• μ°¨μ΄

- **μµλ… ν΄λμ¤**
  - μµλ… ν΄λμ¤λ” ν΄λμ¤λ¥Ό μ„ μ–Έν•κ³  μ¦‰μ‹ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•λ” λ°©μ‹μ΄λ‹¤.
  - λ°λ“μ‹ `new μΈν„°νμ΄μ¤λ…() { ... }` ν•νƒλ΅ μ‘μ„±ν•΄μ•Ό ν•λ©°, λ©”μ„λ“λ¥Ό μ¤λ²„λΌμ΄λ“ν•΄μ„ κµ¬ν„ν•λ‹¤.
  - μµλ… ν΄λμ¤λ„ ν•λ‚μ ν΄λμ¤μ΄λ‹¤.
- **λλ‹¤ ν‘ν„μ‹**
  - λλ‹¤ ν‘ν„μ‹μ€ `->` μ—°μ‚°μλ¥Ό μ‚¬μ©ν•μ—¬ λ§¤κ°λ³€μμ™€ μ‹¤ν–‰ν•  ν•¨μλ¥Ό κ°„κ²°ν•κ² ν‘ν„ν•  μ μλ” λ°©μ‹μ΄λ‹¤.
  - ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό κ°„λ‹¨ν κµ¬ν„ν•  λ• μ£Όλ΅ μ‚¬μ©ν•λ‹¤.
  - λλ‹¤λ„ μΈμ¤ν„΄μ¤κ°€ μƒμ„±λλ‹¤.

### 2. μ½”λ“μ κ°„κ²°ν•¨

- **μµλ… ν΄λμ¤**λ” λ¬Έλ²•μ μΌλ΅ λ” λ³µμ΅ν•κ³  μ¥ν™©ν•λ‹¤. `new μΈν„°νμ΄μ¤λ…()`κ³Ό ν•¨κ» λ©”μ„λ“λ¥Ό μ¤λ²„λΌμ΄λ“ν•΄μ•Ό ν•λ―€λ΅ μ½”λ“μ μ–‘μ΄ 
μƒλ€μ μΌλ΅ λ§λ‹¤.
- **λλ‹¤ ν‘ν„μ‹**μ€ κ°„κ²°ν•λ©° λ¶ν•„μ”ν• μ½”λ“λ¥Ό μµμ†ν™”ν•λ‹¤. λν• λ§μ€ μƒλµ κΈ°λ¥μ„ μ§€μ›ν•΄μ„ ν•µμ‹¬ μ½”λ“λ§ μ‘μ„±ν•  μ μλ‹¤.

### 3. μƒμ† κ΄€κ³„

- **μµλ… ν΄λμ¤**λ” μΌλ°μ μ€ ν΄λμ¤μ²λΌ λ‹¤μ–‘ν• μΈν„°νμ΄μ¤μ™€ ν΄λμ¤λ¥Ό κµ¬ν„ν•κ±°λ‚ μƒμ†ν•  μ μλ‹¤. μ¦‰ μ—¬λ¬ λ©”μ„λ“λ¥Ό κ°€μ§„ μΈν„°νμ΄μ¤λ¥Ό
κµ¬ν„ν•  λ•λ„ μ‚¬μ©ν•  μ μλ‹¤.
- **λλ‹¤ ν‘ν„μ‹**μ€ λ©”μ„λ“λ¥Ό λ”± ν•λ‚λ§ κ°€μ§€λ” ν•¨μν• μΈν„°νμ΄μ¤λ§ κµ¬ν„ν•  μ μλ‹¤.
  - λλ‹¤ ν‘ν„μ‹μ€ ν΄λμ¤λ¥Ό μƒμ†ν•  μ μ—†λ‹¤. μ¤μ§ ν•¨μν• μΈν„°νμ΄μ¤λ§ κµ¬ν„ν•  μ μμΌλ©°, μƒνƒ(ν•„λ“, λ©¤λ²„ λ³€μ)λ‚ μ¶”κ°€μ μΈ
    λ©”μ„λ“ μ¤λ²„λΌμ΄λ”©μ€ λ¶κ°€λ¥ν•λ‹¤.
  - λλ‹¤λ” λ‹¨μν ν•¨μλ¥Ό μ •μν•λ” κ²ƒμΌλ΅, μƒνƒλ‚ μ¶”κ°€μ μΈ μƒμ† κ΄€κ³„λ¥Ό ν•„μ”λ΅ ν•μ§€ μ•λ” μƒν™©μ—μ„λ§ μ‚¬μ©ν•  μ μλ‹¤.

### 4. νΈν™μ„±

- **μµλ… ν΄λμ¤**λ” μλ°”μ μ¤λλ λ²„μ „μ—μ„λ„ μ‚¬μ©ν•  μ μλ‹¤.
- **λλ‹¤ ν‘ν„μ‹**μ€ μλ°” 8λ¶€ν„° λ„μ…λμ—κΈ° λ•λ¬Έμ— κ·Έ μ΄μ „ λ²„μ „μ—μ„λ” μ‚¬μ©ν•  μ μ—†λ‹¤.

### 5. this ν‚¤μ›λ“μ μλ―Έ

- **μµλ… ν΄λμ¤** λ‚΄λ¶€μ—μ„ `this` ν‚¤μ›λ“λ” μµλ… ν΄λμ¤ μμ‹ μ„ κ°€λ¦¬ν‚¨λ‹¤. μ™Έλ¶€ ν΄λμ¤μ™€ λ³„λ„μ μ»¨ν…μ¤νΈλ¥Ό κ°€μ§„λ‹¤.
- **λλ‹¤ ν‘ν„μ‹**μ—μ„ `this` ν‚¤μ›λ“λ” λλ‹¤λ¥Ό μ„ μ–Έν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό κ°€λ¦¬ν‚¨λ‹¤. μ¦‰ λλ‹¤ ν‘ν„μ‹μ€ λ³„λ„μ μ»¨ν…μ¤νΈλ¥Ό κ°€μ§€λ” κ²ƒμ΄ μ•„λ‹λΌ
    λλ‹¤λ¥Ό μ„ μ–Έν• ν΄λμ¤μ μ»¨ν…μ¤νΈλ¥Ό μ μ§€ν•λ‹¤.

**λλ‹¤ λ‚΄λ¶€μ `this`λ” λλ‹¤κ°€ μ„ μ–Έλ μ™Έλ¶€ ν΄λμ¤μ `this`μ™€ λ™μΌν•λ‹¤.**

```java
package lambda.lambda6;

public class OuterMain {
    private String message = "μ™Έλ¶€ ν΄λμ¤ λ©”μ‹μ§€";

    public void execute() {
        //1. μµλ… ν΄λμ¤ μμ‹
        Runnable anonymous = new Runnable() {
            private String message = "μµλ… ν΄λμ¤ λ©”μ‹μ§€";

            @Override
            public void run() {
                //μµλ… ν΄λμ¤μ—μ„μ thisλ” μµλ… ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό κ°€λ¦¬ν‚΄
                System.out.println("[μµλ… ν΄λμ¤] this: " + this);
                System.out.println("[μµλ… ν΄λμ¤] this: " + this.getClass());
                System.out.println("[μµλ… ν΄λμ¤] this: " + this.message);
            }
        };

        //2. λλ‹¤ μμ‹
        Runnable lambda = () -> {
            //λλ‹¤μ—μ„μ thisλ” λλ‹¤κ°€ μ„ μ–Έλ ν΄λμ¤μ μΈμ¤ν„΄μ¤, μ¦‰ μ™Έλ¶€ ν΄λμ¤λ¥Ό κ°€λ¦¬ν‚΄
            System.out.println("[λλ‹¤] this: " + this);
            System.out.println("[λλ‹¤] this: " + this.getClass());
            System.out.println("[λλ‹¤] this: " + this.message);
        };

        anonymous.run();
        System.out.println("-----------------------------------");
        lambda.run();
    }

    public static void main(String[] args) {
        OuterMain outerMain = new OuterMain();
        System.out.println("[μ™Έλ¶€ ν΄λμ¤] : " + outerMain);
        System.out.println("-----------------------------------");
        outerMain.execute();
    }
}
```
```text
[μ™Έλ¶€ ν΄λμ¤] : lambda.lambda6.OuterMain@10f87f48
-----------------------------------
[μµλ… ν΄λμ¤] this: lambda.lambda6.OuterMain$1@34a245ab
[μµλ… ν΄λμ¤] this: class lambda.lambda6.OuterMain$1
[μµλ… ν΄λμ¤] this: μµλ… ν΄λμ¤ λ©”μ‹μ§€
-----------------------------------
[λλ‹¤] this: lambda.lambda6.OuterMain@10f87f48
[λλ‹¤] this: class lambda.lambda6.OuterMain
[λλ‹¤] this: μ™Έλ¶€ ν΄λμ¤ λ©”μ‹μ§€
```

- λλ‹¤μ—μ„ μ‚¬μ©ν• `this`μ™€ μ™Έλ¶€ ν΄λμ¤μ μΈμ¤ν„΄μ¤ μ°Έμ΅°κ°’μ΄ μ„λ΅ κ°™μ€ κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.
- μµλ… ν΄λμ¤λ” μμ‹ μ ν΄λμ¤(`OuterMain$1`)μ™€ μΈμ¤ν„΄μ¤κ°€ λ³„λ„λ΅ μ΅΄μ¬ν•λ‹¤.

### 6. μΊ΅μ²λ§

- **μµλ… ν΄λμ¤**λ” μ™Έλ¶€ λ³€μμ— μ ‘κ·Όν•  μ μμ§€λ§, μ§€μ—­ λ³€μλ” λ°λ“μ‹ `final` νΉμ€ **μ‚¬μ‹¤μƒ final**μΈ λ³€μλ§ μΊ΅μ²ν•  μ μλ‹¤.
- **λλ‹¤ ν‘ν„μ‹**λ„ μµλ… ν΄λμ¤μ™€ κ°™μ΄ μΊ΅μ²λ§μ„ μ§€μ›ν•λ‹¤. μ§€μ—­ λ³€μλ” λ°λ“μ‹ `final` νΉμ€ **μ‚¬μ‹¤μƒ final**μΈ λ³€μλ§ μΊ΅μ²ν•  μ μλ‹¤.

> **π¤” μ‚¬μ‹¤μƒ final (effectively final)**
> 
> **μ‚¬μ‹¤μƒ final** μ§€μ—­ λ³€μλ” μ§€μ—­ λ³€μμ— `final` ν‚¤μ›λ“¤ μ‚¬μ©ν•μ§€λ” μ•μ•μ§€λ§, κ°’μ„ λ³€κ²½ν•μ§€ μ•λ” μ§€μ—­ λ³€μλ¥Ό μλ―Έν•λ‹¤. μ¦‰
> `final` ν‚¤μ›λ“λ¥Ό λ„£μ§€ μ•μ•μ„ λΏμ΄μ§€ μ‹¤μ λ΅λ” `final` ν‚¤μ›λ“λ¥Ό λ„£μ€ κ²ƒμ²λΌ μ¤‘κ°„μ— κ°’μ„ λ³€κ²½ν•μ§€ μ•λ” μ§€μ—­ λ³€μλ‹¤. λ”°λΌμ„
> **μ‚¬μ‹¤μƒ final** μ§€μ—­ λ³€μλ” `final` ν‚¤μ›λ“λ¥Ό λ„£μ–΄λ„ λ™μΌν•κ² μ‘λ™ν•΄μ•Ό ν•λ‹¤.
> 
> [μ°Έκ³ ](https://github.com/geun-00/TIL/blob/main/Java/mid_1/Nested/Local.md#%EC%A7%80%EC%97%AD-%ED%81%B4%EB%9E%98%EC%8A%A4---%EC%A7%80%EC%97%AD-%EB%B3%80%EC%88%98-%EC%BA%A1%EC%B2%98)

```java
public class CaptureMain {
    public static void main(String[] args) {

        final int final1 = 10; //λ…μ‹μ μΌλ΅ final

        int final2 = 20; // μ‚¬μ‹¤μƒ(final): μ¬ν• λ‹Ή(κ°’ λ³€κ²½) μ—†μ
        int changedVar = 30; // κ°’μ΄ λ³€κ²½λλ” λ³€μ

        // 1. μµλ… ν΄λμ¤μ—μ„μ μΊ΅μ²
        Runnable anonymous = new Runnable() {
            @Override
            public void run() {
                System.out.println("μµλ… ν΄λμ¤ - final1: " + final1);
                System.out.println("μµλ… ν΄λμ¤ - final2: " + final2);
                // μ»΄νμΌ μ¤λ¥
//                System.out.println("μµλ… ν΄λμ¤ - changedVar: " + changedVar);
            }
        };

        // 2. λλ‹¤ ν‘ν„μ‹μ—μ„μ μΊ΅μ²
        Runnable lambda = () -> {
            System.out.println("λλ‹¤ - final1: " + final1);
            System.out.println("λλ‹¤ - final2: " + final2);
            // μ»΄νμΌ μ¤λ¥
//            System.out.println("λλ‹¤ - changedVar: " + changedVar);
        };

        // changedVar κ°’μ„ λ³€κ²½ν•΄μ„  "μ‚¬μ‹¤μƒ final"μ΄ μ•„λ‹
        changedVar++;

        anonymous.run();
        lambda.run();
    }
}
```

μµλ… ν΄λμ¤λ‚ λλ‹¤ μ•μ—μ„ μ™Έλ¶€μ μ§€μ—­ λ³€μλ¥Ό μΊ΅μ²ν•΄μ„ μ‚¬μ©ν•  μ μλ‹¤. λ‹¨ μ΄λ• **final** λλ” **μ‚¬μ‹¤μƒ final** μ§€μ—­ λ³€μλ§ μ ‘κ·Όν•  μ μλ‹¤.

### 7. μƒμ„± λ°©μ‹

- **μµλ… ν΄λμ¤**
  - μµλ… ν΄λμ¤λ” μƒλ΅μ΄ ν΄λμ¤λ¥Ό μ •μν•μ—¬ κ°μ²΄λ¥Ό μƒμ„±ν•λ” λ°©μ‹μ΄λ‹¤. μ¦‰ μ»΄νμΌ μ‹ μƒλ΅μ΄ λ‚΄λ¶€ ν΄λμ¤λ΅ λ³€ν™λλ‹¤.
  - μ΄ λ°©μ‹μ€ ν΄λμ¤κ°€ λ©”λ¨λ¦¬ μƒμ—μ„ λ³„λ„λ΅ κ΄€λ¦¬λλ‹¤. λ”°λΌμ„ λ©”λ¨λ¦¬ μƒμ— μ•½κ°„μ μ¶”κ°€ μ¤λ²„ν—¤λ“κ°€ λ°μƒν•λ‹¤.
- **λλ‹¤ ν‘ν„μ‹**
  - λλ‹¤λ” λ‚΄λ¶€μ μΌλ΅ `invokeDynamic` μ΄λΌλ” λ©”μ»¤λ‹μ¦μ„ μ‚¬μ©ν•μ—¬ μ»΄νμΌ νƒ€μ„μ— μ‹¤μ  ν΄λμ¤ νμΌμ„ μƒμ„±ν•μ§€ μ•κ³ , λ°νƒ€μ„
    μ‹μ μ— λ™μ μΌλ΅ ν•„μ”ν• μ½”λ“λ¥Ό μ²λ¦¬ν•λ‹¤.
  - λ”°λΌμ„ λλ‹¤λ” μµλ… ν΄λμ¤λ³΄λ‹¤ λ©”λ¨λ¦¬ κ΄€λ¦¬κ°€ λ” ν¨μ¨μ μ΄λ©° μƒμ„±λ ν΄λμ¤ νμΌμ΄ μ—†μΌλ―€λ΅ ν΄λμ¤ νμΌ κ΄€λ¦¬μ λ³µμ΅μ„±λ„ μ¤„μ–΄λ“ λ‹¤.

μ¦‰ μ΄λ΅ μ μΌλ΅λ” λλ‹¤κ°€ λ³„λ„μ ν΄λμ¤ νμΌλ„ λ§λ“¤μ§€ μ•κ³  λ” κ°€λ³κΈ° λ•λ¬Έμ— μ•½κ°„μ λ©”λ¨λ¦¬μ™€ μ„±λ¥μƒ μ΄μ μ΄ μμ§€λ§ μ•„μ£Ό λ―Έλ―Έν• μ°¨μ΄μ΄λ―€λ΅
μµλ… ν΄λμ¤μ™€ λλ‹¤μ μ„±λ¥ μ°¨μ΄λ” κ±°μ μ—†λ‹¤κ³  λ³΄λ©΄ λλ‹¤.

### 8. μƒνƒ κ΄€λ¦¬

- **μµλ… ν΄λμ¤**
  - μµλ… ν΄λμ¤λ” μΈμ¤ν„΄μ¤ λ‚΄λ¶€μ— **μƒνƒ(ν•„λ“, λ©¤λ²„ λ³€μ)λ¥Ό** κ°€μ§ μ μλ‹¤. μλ¥Ό λ“¤μ–΄ μµλ… ν΄λμ¤ λ‚΄λ¶€μ— λ©¤λ²„ λ³€μλ¥Ό μ„ μ–Έν•κ³ 
  ν•΄λ‹Ή λ³€μμ κ°’μ„ λ³€κ²½ν•κ±°λ‚ μƒνƒλ¥Ό κ΄€λ¦¬ν•  μ μλ‹¤.
  - λ”°λΌμ„ μƒνƒλ¥Ό ν•„μ”λ΅ ν•λ” κ²½μ°, μµλ… ν΄λμ¤κ°€ μ λ¦¬ν•λ‹¤.
- **λλ‹¤ ν‘ν„μ‹**
  - ν΄λμ¤λ” κ·Έ λ‚΄λ¶€μ— **μƒνƒ(ν•„λ“, λ©¤λ²„ λ³€μ)** μ™€ **κΈ°λ¥(λ©”μ„λ“)** μ„ κ°€μ§„λ‹¤. λ°λ©΄μ— ν•¨μλ” κ·Έ λ‚΄λ¶€μ— μƒνƒλ¥Ό κ°€μ§€μ§€ μ•κ³  κΈ°λ¥λ§ μ κ³µν•λ‹¤.
  - ν•¨μμΈ λλ‹¤λ” κΈ°λ³Έμ μΌλ΅ ν•„λ“(λ©¤λ²„ λ³€μ)κ°€ μ—†μΌλ―€λ΅ **μ¤μ¤λ΅ μƒνƒλ¥Ό μ μ§€ν•μ§€λ” μ•λ”λ‹¤.**

### 9. μ©λ„ κµ¬λ¶„

- **μµλ… ν΄λμ¤**
  - **μƒνƒλ¥Ό μ μ§€**ν•κ±°λ‚ λ‹¤μ¤‘ λ©”μ„λ“λ¥Ό κµ¬ν„ν•  ν•„μ”κ°€ μλ” κ²½μ°
  - κΈ°μ΅΄ ν΄λμ¤ λλ” μΈν„°νμ΄μ¤λ¥Ό μƒμ†ν•κ±°λ‚ κµ¬ν„ν•  λ•
  - λ³µμ΅ν• μΈν„°νμ΄μ¤ κµ¬ν„μ΄ ν•„μ”ν•  λ•
- **λλ‹¤ ν‘ν„μ‹**
  - **μƒνƒλ¥Ό μ μ§€ν•  ν•„μ”κ°€ μ—†κ³ ,** κ°„κ²°ν•¨μ΄ μ¤‘μ”ν• κ²½μ°
  - λ‹¨μΌ λ©”μ„λ“λ§ ν•„μ”ν• κ°„λ‹¨ν• ν•¨μν• μΈν„°νμ΄μ¤ κµ¬ν„ μ‹
  - λ” λ‚μ€ μ„±λ¥(ν° μ°¨μ΄λ” μ—†μ)κ³Ό κ°„κ²°ν• μ½”λ“κ°€ ν•„μ”ν• κ²½μ°